{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2020/06/13-render-huge-list-with-react-window/","result":{"data":{"site":{"siteMetadata":{"title":"Into the Blue Hour"}},"markdownRemark":{"id":"edddf8cb-5409-55fd-8ed0-12115a48de23","excerpt":"Smooth user interface has always been an important aspect of a web app, even a digital product in general. As the product grows, so does its data. Let’s say we…","html":"<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABVYUuHPJJ/8QAGxAAAgIDAQAAAAAAAAAAAAAAAQMCIQAEERL/2gAIAQEAAQUCQoMLNcRiRameck7oJv8A/8QAFREBAQAAAAAAAAAAAAAAAAAAECH/2gAIAQMBAT8Bp//EABURAQEAAAAAAAAAAAAAAAAAABAh/9oACAECAQE/AYf/xAAXEAEBAQEAAAAAAAAAAAAAAAABEQAg/9oACAEBAAY/AouW8//EABsQAAMAAgMAAAAAAAAAAAAAAAABESExUYGh/9oACAEBAAE/IcUEXAnt9EtkMfGxj034Xo//2gAMAwEAAgADAAAAEEzP/8QAFhEBAQEAAAAAAAAAAAAAAAAAIQEQ/9oACAEDAQE/EKjP/8QAFhEBAQEAAAAAAAAAAAAAAAAAIQEQ/9oACAECAQE/EIHP/8QAHBABAQACAgMAAAAAAAAAAAAAAREAIVFhMXHB/9oACAEBAAE/EHIXQSn1mm3rNPuGpKdYBrY48GX8go9MpBI8mf/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Photo by Caitlin Oriel on Unsplash\"\n        title=\"Photo by Caitlin Oriel on Unsplash\"\n        src=\"/static/0893e49b663ed8bcb2dc28185fcb6206/1c72d/caitlin-oriel--swfFFgnF6Y-unsplash.jpg\"\n        srcset=\"/static/0893e49b663ed8bcb2dc28185fcb6206/a80bd/caitlin-oriel--swfFFgnF6Y-unsplash.jpg 148w,\n/static/0893e49b663ed8bcb2dc28185fcb6206/1c91a/caitlin-oriel--swfFFgnF6Y-unsplash.jpg 295w,\n/static/0893e49b663ed8bcb2dc28185fcb6206/1c72d/caitlin-oriel--swfFFgnF6Y-unsplash.jpg 590w,\n/static/0893e49b663ed8bcb2dc28185fcb6206/a8a14/caitlin-oriel--swfFFgnF6Y-unsplash.jpg 885w,\n/static/0893e49b663ed8bcb2dc28185fcb6206/fbd2c/caitlin-oriel--swfFFgnF6Y-unsplash.jpg 1180w,\n/static/0893e49b663ed8bcb2dc28185fcb6206/55af9/caitlin-oriel--swfFFgnF6Y-unsplash.jpg 2992w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n  <figcaption>Photo by <a href=\"https://unsplash.com/@coriel\" target=\"_blank\" rel=\"noopener noreferrer\">Caitlin Oriel</a> on <a href=\"https://unsplash.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Unsplash</a></figcaption>\n</figure>\n<p>Smooth user interface has always been an important aspect of a web app, even a digital product in general. As the product grows, so does its data. Let’s say we have a list of people on a page. Traditionally, we loop it with <code class=\"language-text\">map()</code> method like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'./App.css'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> people <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token comment\">/* a list of users */</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> height<span class=\"token operator\">:</span> <span class=\"token string\">\"150px\"</span><span class=\"token punctuation\">,</span> width<span class=\"token operator\">:</span> <span class=\"token string\">\"200px\"</span><span class=\"token punctuation\">,</span> overflowY<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>people<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">person<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> height<span class=\"token operator\">:</span> <span class=\"token string\">\"35px\"</span><span class=\"token punctuation\">,</span> width<span class=\"token operator\">:</span> <span class=\"token string\">\"100%\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>But what if there are a hundred of them? Or even a thousand? They would dramatically reduce our app’s performance and causes a bottleneck. Rendering rows on the list utilizes CPU intensively and the worst case—your browser would choke it to death<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>. A slow app would interrupt the user experience, of course. Lucky enough if the device can survive the heavy load. In order to keep users engaged, we have to avoid letting it happen.</p>\n<h2>Conditional rendering with react-window</h2>\n<p><a href=\"https://github.com/bvaughn/react-window\" target=\"_blank\" rel=\"noopener noreferrer\">react-window</a> is a package of React components capable of rendering a large list of data. You have probably heard of <a href=\"https://github.com/bvaughn/react-virtualized\" target=\"_blank\" rel=\"noopener noreferrer\">react-virtualized</a> by <a href=\"https://github.com/bvaughn\" target=\"_blank\" rel=\"noopener noreferrer\">Brian Vaughn</a>. It has the same purpose—but he made <code class=\"language-text\">react-window</code> a complete rewrite, leaving only the core feature from its precursor. Thus, the package size is reduced from 35.1 kB to 6.2 kB (minified + gzipped)<sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup>.</p>\n<h2>Usage</h2>\n<h3>FixedSizeList</h3>\n<p>If you know how much height you need for each row, import <code class=\"language-text\">FixedSizeList</code> component from <code class=\"language-text\">react-window</code>. Next, pass props as follows:</p>\n<ul>\n<li><code class=\"language-text\">height</code>: our container height in pixel</li>\n<li><code class=\"language-text\">width</code>: our container width in pixel</li>\n<li><code class=\"language-text\">itemCount</code>: how many items we are going to render</li>\n<li><code class=\"language-text\">itemSize</code>: height of each row in pixel</li>\n</ul>\n<p>Suppose that we want to make a list of a thousand artists around the world. Consider the example below:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in your App.jsx</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FixedSizeList <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-window\"</span>\n\n<span class=\"token keyword\">const</span> artists <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token comment\">/* your data */</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Row</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> index<span class=\"token punctuation\">,</span> style <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>style<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>artists<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FixedSizeList</span></span>\n      <span class=\"token attr-name\">height</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">150</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">width</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">300</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">itemCount</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>artists<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">itemSize</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">65</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>Row<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">FixedSizeList</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<p>Inside the component, we add another component named <code class=\"language-text\">Row</code>. This child element inherits two props; <code class=\"language-text\">index</code> and <code class=\"language-text\">style</code>. Pass <code class=\"language-text\">style</code> prop into the element’s own inline <code class=\"language-text\">style</code>. If you are curious what it contains, this is what it looks like from the third row:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  index<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  style<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    position<span class=\"token operator\">:</span> <span class=\"token string\">\"absolute\"</span><span class=\"token punctuation\">,</span>\n    left<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    top<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    height<span class=\"token operator\">:</span> <span class=\"token number\">130</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">/* itemSize × index */</span>\n    width<span class=\"token operator\">:</span><span class=\"token string\">\"100%\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Variable Size List</h3>\n<p>We have made a list of artists. How about giving the featured ones spotlight by making their row bigger? In this case, use <code class=\"language-text\">VariableSizeList</code>. All props are the same, except <code class=\"language-text\">itemSize</code>. It accepts a <code class=\"language-text\">function</code> with <code class=\"language-text\">index</code> passed as an argument that returns <code class=\"language-text\">number</code> eventually.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in your App.jsx</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> VariableSizeList <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-window\"</span>\n\n<span class=\"token keyword\">const</span> artists <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"Above &amp; Beyond\"</span><span class=\"token punctuation\">,</span>\n    featured<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"Andrew Bayer\"</span><span class=\"token punctuation\">,</span>\n    featured<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">/* etc... */</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Row</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> index<span class=\"token punctuation\">,</span> style <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>style<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>artists<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VariableSizeList</span></span>\n      <span class=\"token attr-name\">height</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">150</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">width</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">300</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">itemCount</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>artists<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">itemSize</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">index</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>artists<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>featured <span class=\"token operator\">?</span> <span class=\"token number\">100</span> <span class=\"token operator\">:</span> <span class=\"token number\">65</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>Row<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">VariableSizeList</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<h3>List with AutoSizer</h3>\n<p>If we already have a parent element as the container, <code class=\"language-text\">width</code> and <code class=\"language-text\">height</code> prop values can be set adaptively using <a href=\"https://www.npmjs.com/package/react-virtualized-auto-sizer\" target=\"_blank\" rel=\"noopener noreferrer\">react-virtualized-auto-sizer</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in your App.jsx</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FixedSizeList <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-window\"</span>\n<span class=\"token keyword\">import</span> AutoSizer <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-virtualized-auto-sizer\"</span>\n\n<span class=\"token keyword\">const</span> artists <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token comment\">/* your data */</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Row</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> index<span class=\"token punctuation\">,</span> style <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>style<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>artists<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n      <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        height<span class=\"token operator\">:</span> <span class=\"token string\">\"200px\"</span><span class=\"token punctuation\">,</span>\n        width<span class=\"token operator\">:</span> <span class=\"token string\">\"300px\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AutoSizer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> height<span class=\"token punctuation\">,</span> width <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FixedSizeList</span></span>\n            <span class=\"token attr-name\">height</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>height<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">width</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>width<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">itemCount</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>artists<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">itemSize</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">65</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token punctuation\">{</span>Row<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">FixedSizeList</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">AutoSizer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<h3>Horizontal list and grid</h3>\n<p><code class=\"language-text\">react-window</code> also supports horizontal layout and grid for multidimensional list, allowing the user to scroll both vertically and horizontally. You can check out <a href=\"https://react-window.now.sh/\" target=\"_blank\" rel=\"noopener noreferrer\">react-window.now.sh</a> to see the example.</p>\n<h2>Under the hood</h2>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 578px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.54054054054053%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABv6ydrD0WUXNsZoAX/8QAHRAAAgIBBQAAAAAAAAAAAAAAAgMAAQQQERITMv/aAAgBAQABBQI3bGlnO40S7Mcbq4Xpen//xAAVEQEBAAAAAAAAAAAAAAAAAAAgQf/aAAgBAwEBPwGj/8QAFxEBAQEBAAAAAAAAAAAAAAAAARASQf/aAAgBAgEBPwFDM5P/xAAbEAACAQUAAAAAAAAAAAAAAAAAARARICExwf/aAAgBAQAGPwJro4eB1N2f/8QAHRAAAQQCAwAAAAAAAAAAAAAAAQAQESExUUFh8P/aAAgBAQABPyEVxSRC6G5Ys4KJ9yoLkVtR2WZZFv/aAAwDAQACAAMAAAAQ9M9A/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EBYNn//EABcRAAMBAAAAAAAAAAAAAAAAAAEQITH/2gAIAQIBAT8QpDUU/8QAIBABAAEDAwUAAAAAAAAAAAAAAQARIXEQMcFBUWGR0f/aAAgBAQABPxBnl6lgcwTgUG55OjqqsR8YR6DRRyywfc9fI0vu/Ea13oaf/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"How windowing works\"\n        title=\"How windowing works\"\n        src=\"/static/fc0f3a24ccd6d0625b7701113c3cbc95/49151/window-diagram.jpg\"\n        srcset=\"/static/fc0f3a24ccd6d0625b7701113c3cbc95/a80bd/window-diagram.jpg 148w,\n/static/fc0f3a24ccd6d0625b7701113c3cbc95/1c91a/window-diagram.jpg 295w,\n/static/fc0f3a24ccd6d0625b7701113c3cbc95/49151/window-diagram.jpg 578w\"\n        sizes=\"(max-width: 578px) 100vw, 578px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n  <figcaption>Behind the scene of react-window (source: <a href=\"https://web.dev/virtualize-long-lists-react-window/\">web.dev</a>)</figcaption>\n</figure>\n<p><code class=\"language-text\">react-window</code> implements a similar technique on 3D computer graphics called <em>Occlusion Culling</em> that reveals objects only visible to the user and avoids unnecessary render<sup id=\"fnref-3\"><a href=\"#fn-3\" class=\"footnote-ref\">3</a></sup>. It has a container as tall as the sum of entire rows’ height. Each row is <code class=\"language-text\">absolute</code>-ly positioned (pun intended) and its <code class=\"language-text\">top</code> property is responsible for conditional rendering. There’s also <em>Frustum Culling</em>, a less strict one. However, both are important to keep user experience frictionless. Have a look at <em>Horizon Zero Dawn</em> below.</p>\n<figure>\n  <video autoplay loop muted playsinline>\n    <source src=\"/a72fae76918bc764ebadcf6623a4a19e/horizon-zero-dawn-culling.webm\" type=\"video/webm\">\n    <source src=\"/51287d1efe0ac623437a84c9f5e4f7ce/horizon-zero-dawn-culling.mp4\" type=\"video/mp4\">\n  </video>\n  <figcaption>Frustum Culling (source: <a href=\"https://youtu.be/A0eaGRcdwpo?t=1096\" target=\"_blank\" rel=\"noopener noreferrer\"><i>Horizon Zero Dawn – The making of the game (2017)</i></a> at 18:16 mark)</figcaption>\n</figure>\n<p>Nevertheless, keep in mind that this is not our Swiss-Army-knife for every list. If the number of rows is still reasonable, there is no need to over-engineer it.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>Stack Overflow, <strong><em>performance - Why is the rendering of HTML a cpu intensive process?</em></strong> [website] <a href=\"https://stackoverflow.com/questions/4778356/why-is-the-rendering-of-html-a-cpu-intensive-process\" target=\"_blank\" rel=\"noopener noreferrer\">https://stackoverflow.com/questions/4778356/why-is-the-rendering-of-html-a-cpu-intensive-process</a>, (accessed June 9 2020)</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">↩</a>\n</li>\n<li id=\"fn-2\">\n<p>BundlePhobia, <strong><em>react-virtualized@9.21.2</em></strong> [website], <a href=\"https://bundlephobia.com/result?p=react-virtualized@9.21.2\" target=\"_blank\" rel=\"noopener noreferrer\">https://bundlephobia.com/result?p=react-virtualized@9.21.2</a>, (accessed June 9 2020); BundlePhobia, <strong><em>react-window@1.8.5</em></strong> [website], <a href=\"https://bundlephobia.com/result?p=react-window@1.8.5\" target=\"_blank\" rel=\"noopener noreferrer\">https://bundlephobia.com/result?p=react-window@1.8.5</a>, (accessed June 9 2020)</p>\n<a href=\"#fnref-2\" class=\"footnote-backref\">↩</a>\n</li>\n<li id=\"fn-3\">\n<p>Unity, <strong><em>Manual: Occlusion Culling</em></strong> [website], <a href=\"https://docs.unity3d.com/Manual/OcclusionCulling.html\" target=\"_blank\" rel=\"noopener noreferrer\">https://docs.unity3d.com/Manual/OcclusionCulling.html</a>, (accessed June 9 2020)</p>\n<a href=\"#fnref-3\" class=\"footnote-backref\">↩</a>\n</li>\n</ol>\n</div>","frontmatter":{"title":"Render Huge List With react-window","date":"June 13th, 2020","last_modified_at":null,"categories":["Programming"],"description":"Optimized rendering equals better performance","link":"https://github.com/bvaughn/react-window","tags":["react","tip"],"image":{"publicURL":"/static/0893e49b663ed8bcb2dc28185fcb6206/caitlin-oriel--swfFFgnF6Y-unsplash.jpg"}},"timeToRead":5}},"pageContext":{"slug":"/blog/2020/06/13-render-huge-list-with-react-window/","previous":{"fields":{"slug":"/blog/2020/06/07-drawing-er-diagrams-is-not-arduous/"},"frontmatter":{"title":"Drawing ER Diagrams Is (Not) Arduous"}},"next":{"fields":{"slug":"/blog/2020/06/23-building-a-cat-facts-app-with-flask/"},"frontmatter":{"title":"Building a Cat Facts App With Flask"}}}}}